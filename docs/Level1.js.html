<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Level1.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Level1.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Class for the level 1 scene.
 *
 * @class Level1
 * @extends {Phaser.Scene}
 */
class Level1 extends Phaser.Scene {
  
  /**
   * Creates an instance of Level1.
   * @memberof Level1
   */
  constructor() {
    super("Level1");
  }


  /**
   * Initialice variables
   * @param {*} data - Number of Players (1 or 2) send by the MenuScene
   * @memberof Level1
   */
  init(data) {
    this.numPlayers = data.numPlayers;
  }


  /**
   * Creates the scene elements
   *
   * @memberof Level1
   */
  create() {
    /** TileSprite background */
    this.bgScene2 = this.add.tileSprite(0, 0, config.width, config.height, "background").setOrigin(0,0);
        
    /** create physics group for collisions enemies */
    this.enemies = this.physics.add.group();

    /** create the players */
    this.players = this.add.group();    //if the group is physics, don't collide with world bounds

    /** Create the enemies */
    var configEnemy1 = {
      scene: this,
      posX: config.width/2 - 50,
      posY: config.height/2,
      texture: "ship1",
      anim: "ship1_fly",
      speed: 1  
    }
    this.ship1 = new Enemy(configEnemy1);
    
    var configEnemy2 = {
      scene: this,
      posX: config.width/2,
      posY: config.height/2,
      texture: "ship2",
      anim: "ship2_fly",
      speed: 2
    }
    this.ship2 = new Enemy(configEnemy2);

    var configEnemy3 = {
      scene: this,
      posX: config.width/2 + 50,
      posY: config.height/2,
      texture: "ship3",
      anim: "ship3_fly",
      speed: 3
    }
    this.ship3 = new Enemy(configEnemy3);

    
    this.add.text(20, 50, 'THE Game!!!', {font: "25px Arial", fill: "yellow"});
    console.log("cargando Scene 2");

    /** Create group or collection for powerup object */
    this.powerUps = this.physics.add.group();

    /**
     * Create 4 objects and add to the group 
     * @type maxObjects 
     */
    var maxObjects = 4;
    for (var i=0; i&lt;maxObjects; i++) {
      var anim = (i%2 == 0) ? "red" : "gray";
      
      var powerUp = new PowerUp({
        scene: this, 
        texture: "powerUp",
        anim: anim,        
      });      
    }

    /** Create Player1 */
    var configPlayer = {
      scene: this,
      posX: config.width/2,
      posY: config.height - 60,
      texture: "player",
      color: "0xff0000",    //red, also valid without double quotes
      cursors: true,       //use the cursor keys
      shootKey: Phaser.Input.Keyboard.KeyCodes.K,
      beamMax: 20,
      playerNumber: 2
    }
    this.player = new Player(configPlayer);

    /** Create Player2 */
    var configPlayer2 = {
      scene: this,
      posX: config.width/2 - 50,
      posY: config.height - 60,
      texture: "player",
      color: "0x00ff00",    //green
      cursors: false,      //use the WASD keys
      shootKey: Phaser.Input.Keyboard.KeyCodes.F,
      beamMax: 20,
      playerNumber: 1
    }

    if (this.numPlayers == 2) {
      this.player2 = new Player(configPlayer2);
    }

    /** A group for all the projectiles */
    this.projectiles = this.add.group();
   
    /** Collisions */
    this.physics.add.overlap(this.players, this.powerUps, this.player.pickPowerUp, null, this);
    this.physics.add.overlap(this.players, this.enemies, this.player.hurtPlayer, null, this);    
  }//create
  

  /**
   * Update 60 times per secons
   *
   * @memberof Level1
   */
  update() {    
    this.ship1.update();
    this.ship2.update();
    this.ship3.update();
    
    this.bgScene2.tilePositionY -= 0.5;   //scroll effect

    /** 
     * All lives of the player, if reach 0 gameover
     * @type allLives
     */
    let allLives=0;

    /** 
     * All players, now only two max
     * @type allPlayers
     */
    var allPlayers = this.players.getChildren();
    allPlayers.forEach((player)=>{
      player.update();              //update all players
      allLives += player.lives;   //count all lives 
    });
    
    if (allLives==0) {
      this.scene.start("GameOver");
    }

    /** 
     * All the beams
     * @type beams
     */
    var beams = this.projectiles.getChildren();   //return array
    beams.forEach((beam) => {       
      beam.update();
    });
  }  
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Beam.html">Beam</a></li><li><a href="Beam.Beam.html">Beam</a></li><li><a href="BootScene.html">BootScene</a></li><li><a href="BootScene.BootScene.html">BootScene</a></li><li><a href="Enemy.html">Enemy</a></li><li><a href="Enemy.Enemy.html">Enemy</a></li><li><a href="GameOver.html">GameOver</a></li><li><a href="GameOver.GameOver.html">GameOver</a></li><li><a href="Level1.html">Level1</a></li><li><a href="Level1.Level1.html">Level1</a></li><li><a href="MenuScene.html">MenuScene</a></li><li><a href="MenuScene.MenuScene.html">MenuScene</a></li><li><a href="Player.html">Player</a></li><li><a href="Player.Player.html">Player</a></li><li><a href="PowerUp.html">PowerUp</a></li><li><a href="PowerUp.PowerUp.html">PowerUp</a></li></ul><h3>Global</h3><ul><li><a href="global.html#config">config</a></li><li><a href="global.html#game">game</a></li><li><a href="global.html#gameSettings">gameSettings</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Mar 07 2021 15:54:21 GMT+0100 (hora est√°ndar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
